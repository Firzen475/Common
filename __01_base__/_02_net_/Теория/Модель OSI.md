# Модель OSI: Уровни, функции и методы диагностики

| №  | Уровень          | Функции                                                                 | Примеры протоколов/устройств         | Инструменты и методы диагностики                                                              |
|----|------------------|-------------------------------------------------------------------------|---------------------------------------|----------------------------------------------------------------------------------------------|
| 7  | **Прикладной**   | Взаимодействие с пользователем и приложениями (HTTP, FTP, SMTP).       | HTTP, FTP, DNS, SMTP                 | `curl`, `wget`, `Postman`, `dig`, `nslookup`, логи приложений (`journalctl`, Event Viewer).   |
| 6  | **Представления**| Преобразование данных (шифрование, сжатие, кодирование).               | SSL/TLS, JPEG, MPEG                  | `openssl s_client`, Wireshark (фильтр `ssl`), конвертеры кодировок (`iconv`).                |
| 5  | **Сеансовый**    | Управление сеансами связи (установка, поддержка, завершение).          | NetBIOS, RPC, SIP                    | `netstat -tulnp`, Wireshark (фильтры `sip`, `rpc`), логи сервисов (например, `smbd`).        |
| 4  | **Транспортный** | Надёжная доставка данных (TCP/UDP), контроль потоков и ошибок.         | TCP, UDP                             | `telnet`, `nc` (netcat), `nmap`, `tcpdump`, Wireshark, `iperf3`.                            |
| 3  | **Сетевой**      | Маршрутизация, логическая адресация (IP-адреса).                       | IP, ICMP, BGP, маршрутизаторы        | `ping`, `traceroute`/`tracert`, `ip route`/`route print`, Wireshark (фильтр `icmp`).         |
| 2  | **Канальный**    | Физическая адресация (MAC-адреса), обнаружение ошибок.                 | Ethernet, Wi-Fi, коммутаторы         | `arp -a`, `ip link`/`ipconfig /all`, Wireshark (фильтр `arp`), `macof` (для дублирования MAC).|
| 1  | **Физический**   | Передача битов по среде (кабель, радиосигнал).                         | DSL, USB, оптоволокно, хабы          | `ethtool`, `ping`, визуальный осмотр кабелей, TDR-тестеры.                                   |

### Общие инструменты для всех уровней:
- **Wireshark** (анализ трафика с фильтрами: `http`, `tcp`, `ip`, `arp` и др.).
- **tcpdump** (консольный аналог Wireshark).
- **Логи** (`/var/log/` в Linux, Event Viewer в Windows).

# L2
## Протоколы и технологии канального уровня (L2) модели OSI

| Категория       | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|-----------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Локальные сети** | Ethernet (IEEE 802.3) | Передача данных в проводных сетях                                        | Подключение ПК к коммутатору             |
|                 | Wi-Fi (IEEE 802.11)  | Беспроводная передача данных                                             | Домашний роутер с Wi-Fi 6                |
| **Виртуальные сети** | VLAN (802.1Q)     | Логическое разделение одной сети на подсети                               | Отделение гостевой сети от корпоративной |
| **Точка-точка** | PPP                 | Прямое соединение между двумя узлами                                      | Модемное подключение к ISP               |
|                 | HDLC                | Синхронная передача данных                                               | Подключение T1/E1                        |
| **Коммутация**  | STP (802.1D)        | Предотвращение петель в сети                                              | Настройка коммутаторов Cisco             |
|                 | RSTP                | Ускоренная версия STP                                                    | Быстрое восстановление сети              |
| **Безопасность** | MACsec (802.1AE)    | Шифрование на канальном уровне                                           | Защита трафика в дата-центре             |
| **Мониторинг**  | LLDP                | Обнаружение соседних устройств                                           | Карта сети в Zabbix                      |

### Устройства канального уровня

| Тип устройства   | Функция                                                                 |
|------------------|-------------------------------------------------------------------------|
| Сетевой коммутатор | Передача кадров по MAC-адресам                                         |
| Точка доступа Wi-Fi | Обеспечение беспроводного доступа                                      |
| Сетевой мост     | Фильтрация трафика между сегментами сети (устарел)                      |
| Сетевой адаптер  | Преобразование данных в сигналы (медные/оптические)                     |

# L3
## Протоколы и технологии сетевого уровня (L3) модели OSI

| Категория            | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|----------------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Основные протоколы** | IPv4                | Основной протокол интернет-связи (32-битные адреса)                       | 192.168.1.1                              |
|                      | IPv6                | Новый протокол с расширенным адресным пространством (128 бит)             | 2001:0db8:85a3::8a2e:0370:7334           |
| **Маршрутизация**    | OSPF                | Протокол динамической маршрутизации (link-state)                          | Крупные корпоративные сети               |
|                      | BGP                 | Протокол маршрутизации между автономными системами                        | Интернет-провайдеры                      |
| **Вспомогательные**  | ICMP                | Диагностика и управление сетью (ping, traceroute)                         | ping 8.8.8.8                             |
|                      | ARP                 | Сопоставление IP и MAC адресов                                            | arp -a                                   |
| **Туннелирование**   | GRE                 | Универсальный туннельный протокол                                         | VPN между филиалами                      |
|                      | IPsec               | Защищённое туннелирование                                                 | Защищённые соединения между офисами      |
| **Мультикаст**       | IGMP                | Управление групповой рассылкой                                            | Видеоконференции                         |
|                      | PIM                 | Протокол независимой multicast-маршрутизации                              | IPTV                                     |
| **Автоконфигурация** | DHCP                | Автоматическое назначение IP-адресов                                      | Домашние сети                            |
| **QoS**             | DSCP                | Система классов обслуживания трафика                                      | Приоритизация VoIP                       |

### Устройства сетевого уровня

| Тип устройства       | Функция                                                                 |
|----------------------|-------------------------------------------------------------------------|
| Маршрутизатор (роутер) | Принятие решений о передаче пакетов между сетями                      |
| L3-коммутатор        | Коммутатор с функциями маршрутизации                                   |
| Шлюз                | Интерфейс между разными типами сетей                                   |
| Файрвол             | Фильтрация трафика на сетевом уровне                                   |

### Характеристики сетевого уровня:
- Работа с **логической адресацией** (IP-адреса)
- **Маршрутизация** между разными сетями
- Поддержка **фрагментации пакетов**
- Обеспечение **соединения между разнородными сетями**

# L4
## Протоколы и технологии транспортного уровня (L4) модели OSI

| Категория            | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|----------------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Основные протоколы** | TCP                 | Надёжная передача данных с установкой соединения                          | Веб-браузинг (HTTP/HTTPS)                |
|                      | UDP                 | Быстрая передача данных без установки соединения                          | Видеостримы, VoIP                        |
| **Управление**       | SCTP                | Надёжная передача с несколькими потоками                                  | Телекоммуникационные системы             |
|                      | DCCP                | Датаграммный протокол с контролем перегрузки                              | Потоковое мультимедиа                    |
| **Порты и мультиплексирование** | Диапазоны портов  | Идентификация сервисов (0-1023: системные, 1024-49151: пользовательские) | 80 - HTTP, 443 - HTTPS                   |
| **Надёжность**       | Трёхэтапное рукопожатие TCP | Установка соединения                                                 | Начало TCP-сессии                        |
|                      | Контроль перегрузки | Алгоритмы Reno, CUBIC и др.                                              | Автоподстройка скорости передачи         |
| **Оптимизация**      | QUIC                | Ускоренный протокол поверх UDP                                            | HTTP/3                                   |
|                      | Multipath TCP       | Использование нескольких сетевых путей                                    | Мобильные устройства                     |

### Ключевые функции L4:

| Функция              | Реализация                                                                 |
|----------------------|---------------------------------------------------------------------------|
| Сегментация данных   | Разбивка на пакеты/датаграммы                                            |
| Управление потоком   | Окна перегрузки в TCP                                                    |
| Контроль ошибок      | Проверка целостности и повторная передача                                 |
| Мультиплексирование  | Использование портов для нескольких соединений                            |
| Установка соединения | Процедуры handshake (TCP)                                                |

### Устройства, работающие с L4:

| Устройство          | Роль                                                                     |
|---------------------|-------------------------------------------------------------------------|
| Модем              | Преобразование сигналов (частично L4)                                   |
| Файрвол            | Фильтрация по портам и протоколам                                       |
| Балансировщик нагрузки | Распределение трафика между серверами                                 |
| NAT-устройство      | Трансляция сетевых адресов и портов                                     |

### Сравнение TCP и UDP:

| Характеристика      | TCP                          | UDP                          |
|---------------------|-----------------------------|-----------------------------|
| Надёжность          | Гарантированная доставка     | Без гарантий доставки       |
| Скорость            | Медленнее (из-за проверок)   | Быстрее                    |
| Установка соединения| Требуется handshake          | Не требуется               |
| Контроль перегрузки | Сложные алгоритмы            | Отсутствует                |
| Использование       | Веб, почта, файлы            | Видео, игры, DNS           |

# L5

## Протоколы и технологии сеансового уровня (L5) модели OSI

| Категория            | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|----------------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Управление сеансами** | NetBIOS            | Установка и поддержка сеансов связи между приложениями                    | Локальные сети Windows                   |
|                      | RPC (Remote Procedure Call) | Межпроцессное взаимодействие                                      | Распределённые системы                   |
| **Аутентификация**   | Kerberos            | Протокол аутентификации в компьютерных сетях                              | Корпоративные сети Active Directory      |
|                      | SSL/TLS Handshake   | Установка безопасного сеанса (хотя TLS обычно относят к L6-L7)            | HTTPS соединения                         |
| **Синхронизация**    | PPTP                | Туннельный протокол с управлением сеансом                                 | Устаревшие VPN соединения                |
|                      | L2TP                | Протокол туннелирования с поддержкой сеансов                              | Современные VPN решения                  |
| **Диалоговый контроль** | SIP (Session Initiation Protocol) | Установка мультимедийных сеансов                                | VoIP, видеоконференции                   |
|                      | H.323               | Стандарт для мультимедийной коммуникации                                  | Видеосвязь                               |

### Ключевые функции L5:

| Функция              | Реализация                                                                 |
|----------------------|---------------------------------------------------------------------------|
| Установка сеанса     | Согласование параметров связи между системами                             |
| Поддержка сеанса     | Поддержание активности соединения                                         |
| Завершение сеанса    | Корректное завершение сессии                                              |
| Синхронизация        | Координация взаимодействия между системами                                |
| Диалоговый контроль  | Управление очередностью передачи (full-duplex/half-duplex)                |

### Примеры работы сеансового уровня:

1. **Сессия браузера**:
  - Установка HTTPS-сессии (TLS handshake)
  - Поддержание cookie-сессии
  - Завершение сессии при выходе

2. **Видеоконференция**:
  - Установка сеанса через SIP
  - Управление медиапотоками
  - Завершение вызова

3. **Файловый доступ**:
  - Аутентификация сессии (Kerberos)
  - Поддержка соединения SMB
  - Освобождение ресурсов при завершении

# L6

## Протоколы и технологии уровня представления (L6) модели OSI

| Категория            | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|----------------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Шифрование**       | SSL/TLS             | Защита данных при передаче                                                | HTTPS-соединения                         |
|                      | SSH                 | Безопасный удалённый доступ                                               | Удалённое управление серверами           |
| **Сжатие данных**    | gzip                | Сжатие текстовых данных                                                   | Передача веб-страниц                     |
|                      | JPEG                | Сжатие изображений                                                        | Загрузка фото на сайты                   |
| **Кодирование**      | ASCII/Unicode       | Преобразование символов                                                   | Текстовые документы                      |
|                      | Base64              | Кодирование бинарных данных в текст                                       | Передача файлов по email                 |
| **Сериализация**     | JSON                | Текстовый формат обмена данными                                           | API веб-сервисов                         |
|                      | XML                 | Структурированное хранение данных                                         | Конфигурационные файлы                   |
| **Преобразование**   | MIME                | Стандарт для передачи мультимедиа                                         | Электронная почта с вложениями           |
|                      | AFP                 | Протокол обмена файлами Apple                                             | Работа с файлами на macOS                |

### Ключевые функции L6:

| Функция              | Реализация                                                                 |
|----------------------|---------------------------------------------------------------------------|
| Шифрование/дешифрация | Преобразование данных для безопасной передачи                            |
| Сжатие/распаковка    | Оптимизация объёма передаваемых данных                                   |
| Кодирование символов | Преобразование между различными кодировками                              |
| Сериализация данных  | Преобразование структур данных в поток байтов                            |
| Преобразование форматов | Конвертация между различными форматами представления данных           |

### Примеры работы уровня представления:

1. **Веб-браузинг**:
  - Шифрование TLS для HTTPS
  - Сжатие gzip для веб-страниц
  - Кодирование Base64 для встроенных изображений

2. **Электронная почта**:
  - MIME-кодирование вложений
  - ASCII/Unicode для текста письма
  - Возможное шифрование PGP

3. **API-взаимодействие**:
  - Сериализация данных в JSON
  - Сжатие ответов сервера
  - Кодирование UTF-8 для текста

# L7

## Протоколы и технологии прикладного уровня (L7) модели OSI

| Категория            | Протокол/Технология | Назначение                                                                 | Пример использования                     |
|----------------------|---------------------|---------------------------------------------------------------------------|------------------------------------------|
| **Веб-технологии**   | HTTP/HTTPS          | Передача гипертекста                                                      | Веб-браузеры                             |
|                      | WebSocket           | Двусторонняя связь в реальном времени                                     | Онлайн-чаты, игры                        |
| **Электронная почта**| SMTP                | Отправка почты                                                            | Почтовые клиенты                         |
|                      | IMAP/POP3           | Получение почты                                                           | Thunderbird, Outlook                     |
| **Файловый обмен**   | FTP/SFTP           | Передача файлов                                                           | FileZilla                                |
|                      | NFS/SMB             | Сетевые файловые системы                                                  | Общие папки в сети                       |
| **Удалённый доступ** | SSH                 | Безопасное управление серверами                                           | Подключение к VPS                        |
|                      | RDP                 | Удалённый рабочий стол                                                    | Удалённая работа                         |
| **Базы данных**      | SQL                 | Взаимодействие с реляционными БД                                          | MySQL, PostgreSQL                        |
|                      | NoSQL               | Работа с нереляционными БД                                                | MongoDB, Redis                           |
| **Мультимедиа**      | RTMP                | Потоковая передача видео                                                  | YouTube Live                             |
|                      | SIP                 | Голосовая связь через IP                                                  | VoIP телефония                           |
| **Управление сетью** | SNMP                | Мониторинг сетевых устройств                                              | Zabbix, PRTG                             |
|                      | DNS                 | Преобразование доменных имён в IP-адреса                                  | Интернет-браузинг                       |

### Ключевые функции L7:

| Функция              | Реализация                                                                 |
|----------------------|---------------------------------------------------------------------------|
| Взаимодействие с пользователем | Графические интерфейсы, веб-страницы                                |
| Сетевые сервисы      | Предоставление конкретных услуг (почта, файлы, видео)                    |
| API                  | Интерфейсы для взаимодействия программ                                   |
| Аутентификация       | Проверка подлинности пользователей                                       |
| Обработка данных     | Преобразование информации для конечного использования                    |
