# –£—Ç–∏–ª–∏—Ç–∞ `vmstat` –≤ Linux: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
`vmstat` (Virtual Memory Statistics) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞–º—è—Ç–∏ (RAM, swap)
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–µ CPU
- –î–∏—Å–∫–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö (I/O)
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è—Ö

## üîç –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
```bash
vmstat [–∏–Ω—Ç–µ—Ä–≤–∞–ª_—Å–µ–∫—É–Ω–¥] [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_–∑–∞–º–µ—Ä–æ–≤]
```

## üõ† –ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ü–∏–∏

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ                              |
|-------|---------------------------------------|
| -a	   | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é/–Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å |
| -d	   | –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∏—Å–∫–∞–º        |
| -p	   | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –¥–∏—Å–∫–∞          |
| -s	   | –°–≤–æ–¥–∫–∞ –ø–æ –ø–∞–º—è—Ç–∏ (–∫–∞–∫ free -h)        |
| -w    | 	–®–∏—Ä–æ–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞                |

```bash
vmstat 1
```
```
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
```
## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è `vmstat`

| –ü–æ–ª–µ                        | –û–ø–∏—Å–∞–Ω–∏–µ                                         | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ        |
|-----------------------------|--------------------------------------------------|-----------------------------|
| **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏**    |                                                  |                             |
| **r**                       | –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ CPU                        | > —á–∏—Å–ª–∞ —è–¥–µ—Ä CPU            |
| **b**                       | –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `D` (uninterruptible sleep) | > 0 –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è        |
| **–ü–∞–º—è—Ç—å (Memory)**         |                                                  |                             |
| **swpd**                    | –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π swap                                | 0 (–∏–¥–µ–∞–ª)                   |
| **free**                    | –°–≤–æ–±–æ–¥–Ω–∞—è RAM                                    | >10% –æ—Ç –æ–±—â–µ–π               |
| **buff**                    | –ü–∞–º—è—Ç—å –ø–æ–¥ –±—É—Ñ–µ—Ä—ã                                | -                           |
| **cache**                   | –ü–∞–º—è—Ç—å –ø–æ–¥ –∫—ç—à                                   | -                           |
| **inact**                   | –ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å (`-a` —Ä–µ–∂–∏–º)                   | -                           |
| **active**                  | –ê–∫—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å (`-a` —Ä–µ–∂–∏–º)                     | -                           |
| **Swap-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**         |                                                  |                             |
| **si**                      | Swap-in (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ swap –≤ RAM)                 | >0 –ø–æ—Å—Ç–æ—è–Ω–Ω–æ                |
| **so**                      | Swap-out (–≤—ã–≥—Ä—É–∑–∫–∞ –∏–∑ RAM –≤ swap)                | >0 –ø–æ—Å—Ç–æ—è–Ω–Ω–æ                |
| **–î–∏—Å–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (I/O)** |                                                  |                             |
| **bi**                      | Blocks in (—á—Ç–µ–Ω–∏–µ —Å –¥–∏—Å–∫–∞)                       | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∏—Å–∫–∞            |
| **bo**                      | Blocks out (–∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫)                      | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∏—Å–∫–∞            |
| **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**       |                                                  |                             |
| **in**                      | –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥—É                             | –†–µ–∑–∫–∏–µ —Å–∫–∞—á–∫–∏ = –ø—Ä–æ–±–ª–µ–º–∞    |
| **cs**                      | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è                         |  –†–µ–∑–∫–∏–π —Ä–æ—Å—Ç = –Ω–∞–≥—Ä—É–∑–∫–∞     |
| **CPU-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**          |                                                  |                             |
| **us**                      | % –≤—Ä–µ–º–µ–Ω–∏ –≤ user-space                           | <70%                        |
| **sy**                      | % –≤—Ä–µ–º–µ–Ω–∏ –≤ kernel-space                         | <30%                        |
| **id**                      | % –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å—Ç–æ—è                                | –ß–µ–º –≤—ã—à–µ, —Ç–µ–º –ª—É—á—à–µ         |
| **wa**                      | % –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è I/O                           | <10%                        |
| **st**                      | % –≤—Ä–µ–º–µ–Ω–∏ "—É–∫—Ä–∞–¥–µ–Ω–Ω–æ–≥–æ" –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π      | 0 (–¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤) |

## üî• **–ü—Ä–∏–º–µ—Ä –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π**
1. **`so` > 0 –∏ `free` ‚âà 0** ‚Üí –ñ—ë—Å—Ç–∫–∞—è –Ω–µ—Ö–≤–∞—Ç–∫–∞ RAM
2. **`wa` > 20%** ‚Üí –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∏—Å–∫–æ–º (–º–µ–¥–ª–µ–Ω–Ω—ã–π/–ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π)
3. **`r` > 5 –Ω–∞ 4-—è–¥–µ—Ä–Ω–æ–º CPU** ‚Üí –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
4. **`si` –ø–æ—Å—Ç–æ—è–Ω–Ω–æ > 0** -> –ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap (—Ç–æ—Ä–º–æ–∑–∞)
