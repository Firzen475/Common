## Команда `lsof` - основные параметры и примеры использования

| Параметр                 | Описание                                      | Пример использования               |
|--------------------------|-----------------------------------------------|------------------------------------|
| **Базовые команды**      |
| (без параметров)         | Вывести все открытые файлы                    | `sudo lsof`                        |
| `-i`                     | Показать сетевые соединения                   | `lsof -i`                          |
| `-i :порт`               | Процессы, использующие указанный порт         | `lsof -i :80`                      |
| `-i TCP`                 | Только TCP-соединения                         | `lsof -i TCP`                      |
| `-i UDP`                 | Только UDP-соединения                         | `lsof -i UDP`                      |
| **Фильтрация процессов** |
| `-c <имя>`               | Файлы, открытые процессами с указанным именем | `lsof -c nginx`                    |
| `-p <PID>`               | Файлы, открытые процессом с указанным PID     | `lsof -p 1234`                     |
| `-u <user>`              | Файлы, открытые указанным пользователем       | `lsof -u root`                     |
| **Работа с файлами**     |
| `+D <dir>`               | Файлы в указанной директории (рекурсивно)     | `lsof +D /var/log`                 |
| `+d <dir>`               | Файлы в указанной директории (без рекурсии)   | `lsof +d /tmp`                     |
| **Специальные форматы**  |
| `-t`                     | Выводить только PID процессов                 | `lsof -t /var/log/file.log`        |
| `-n`                     | Не преобразовывать IP-адреса в имена          | `lsof -i -n`                       |
| `-P`                     | Не преобразовывать номера портов в имена      | `lsof -i -P`                       |
| **Полезные комбинации**  |
|                          | Все соединения с конкретным IP                | `lsof -i @192.168.1.1`             |
|                          | Все процессы, слушающие порты                 | `lsof -i -sTCP:LISTEN`             |
|                          | Процессы, использующие устройство             | `lsof /dev/sda1`                   |
|                          | Удалить все процессы, использующие файл       | `kill -9 $(lsof -t /path/to/file)` |
