
# Полный справочник по опциям `strace`

| Опция                  | Описание                                        | Пример использования               |
|------------------------|-------------------------------------------------|------------------------------------|
| **Основные опции**     |
| `-c`                   | Подсчет и вывод статистики по системным вызовам |  `strace -c ls /tmp`               |
| `-f`                   | Трассировка дочерних процессов                  | `strace -f make`                   |
| `-p PID`               | Присоединение к работающему процессу            | `strace -p 1234`                   |
| `-o файл`              | Запись вывода в файл                            | `strace -o log.txt program`        |
| **Фильтрация**         |
| `-e trace=класс`       | Фильтр по классам вызовов                       | `strace -e trace=file ls`          |
| `-e trace=сис.вызов`   | Фильтр по конкретным вызовам                    | `strace -e trace=open,read`        |
| `-e signal=набор`      | Фильтр по сигналам                              | `strace -e signal=all`             |
| `-e status=код`        | Фильтр по кодам возврата                        | `strace -e status=failed`          |
| **Формат вывода**      |
| `-t`                   | Добавить временные метки                        | `strace -t program`                |
| `-tt`                  | Микросекундные метки                            | `strace -tt program`               |
| `-T`                   | Показать время выполнения вызовов               | `strace -T program`                |
| `-v`                   | Вербамный вывод (полные структуры)              | `strace -v program`                |
| `-s размер`            | Макс. длина строки (по умолчанию 32)            | `strace -s 1000 program`           |
| `-y`                   | Показывать пути для файловых дескрипторов       | `strace -y program`                |
| **Отладка**            |
| `-b execve`            | Отсоединяться при вызове execve                 | `strace -b execve sh -c "ls"`      |
| `-k`                   | Вывод стектрейсов (требует debuginfo)           | `strace -k program`                |
| `-Z`                   | Показывать данные SELinux                       | `strace -Z program`                |
| **Производительность** |
| `-r`                   | Относительные временные метки                   | `strace -r program`                |
| `-w`                   | Суммарное время по вызовам                      | `strace -wc program`               |
| **Специальные**        |
| `-D`                   | Запуск в отдельном процессе                     | `strace -D program`                |
| `-E var=val`           | Установка переменных окружения                  | `strace -E PATH=/newpath program`  |
| `-P путь`              | Трассировка только указанного пути              | `strace -P /etc/passwd cat /etc/*` |

## Примеры использования фильтров

### Классы системных вызовов:
```bash
strace -e trace=file      # Только файловые операции
strace -e trace=process   # Управление процессами
strace -e trace=network   # Сетевые вызовы
strace -e trace=signal    # Работа с сигналами
strace -e trace=ipc       # Межпроцессное взаимодействие
strace -e trace=desc      # Дескрипторы файлов
strace -e trace=memory    # Операции с памятью
```